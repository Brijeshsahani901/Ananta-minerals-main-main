"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[801],{801:function(e,t,n){n.r(t);var o=n(5893),i=n(7294),r=n(4250),s=n(9477),l=n(9365);let a=e=>{let{steps:t,activeStep:n}=e,a=(0,i.useRef)(null),d=(0,i.useRef)(new r.xsS),c=(0,i.useRef)(null),u=(0,i.useRef)(null),w=(0,i.useRef)(null),h=(0,i.useRef)({cubes:[],drones:[]}),[p,f]=(0,i.useState)(null),[m,x]=(0,i.useState)([]),v=(0,i.useRef)(new r.FM8),y=(0,i.useRef)(new r.SUY),b=(0,i.useRef)(0);(0,i.useEffect)(()=>{if(!a.current)return;let e=d.current;e.background=new r.Ilk(1118481),e.fog=new r.ybr(1118481,10,30);let t=new r.cPb(50,window.innerWidth/window.innerHeight,.1,1e3);t.position.set(0,8,20),c.current=t;let n=new s.CP7({canvas:a.current,antialias:!0,alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),n.shadowMap.enabled=!0,u.current=n;let o=new l.z(t,n.domElement);o.enableDamping=!0,o.enableZoom=!1,o.minDistance=5,o.maxDistance=30,o.maxPolarAngle=Math.PI/2-.1,w.current=o,e.add(new r.Mig(16777215,.4));let i=new r.Ox3(16777215,1);i.position.set(10,20,15),i.castShadow=!0,e.add(i);let h=new r.Kj0(new r._12(40,40),new r.Wid({color:1712172,roughness:.9,metalness:.1}));h.rotation.x=-Math.PI/2,h.position.y=-3,h.receiveShadow=!0,e.add(h);let p=new r.VLJ(30,30,2963272,2963272);p.position.y=-2.99,e.add(p);let f=()=>{t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",f),()=>{o.dispose(),n.dispose(),window.removeEventListener("resize",f)}},[]),(0,i.useEffect)(()=>{let e=d.current,{cubes:n,drones:o}=h.current;n.forEach(t=>{let{mesh:n}=t;return e.remove(n)}),o.forEach(t=>{let{mesh:n}=t;return e.remove(n)}),h.current={cubes:[],drones:[]},t.forEach(t=>{let n=new r.ZAu;n.position.set(...t.position),e.add(n);let o=new r.Kj0(new r.DvJ(1.5,1.5,1.5),new r.Wid({color:new r.Ilk(t.color),metalness:.85,roughness:.15,transparent:!0,opacity:.8}));o.castShadow=!0,o.receiveShadow=!0,n.add(o);let i=new r.ejS(new r.TOt(new r.DvJ(1.5,1.5,1.5)),new r.nls({color:16777215}));o.add(i);let s=new r.Kj0(new r.DvJ(1.55,1.55,1.55),new r.vBJ({color:t.color,opacity:.3,transparent:!0,side:r._Li}));n.add(s);let l=g();l.position.set(t.position[0],t.position[1]+2.5,t.position[2]),e.add(l),h.current.cubes.push({mesh:n,id:t.id}),h.current.drones.push({mesh:l,id:t.id,baseY:t.position[1]+2.5})})},[t]),(0,i.useEffect)(()=>{let e;let n=u.current,o=c.current,i=d.current,s=w.current;if(!n||!o||!s)return;let l=new r.iMs,a=e=>{let t=n.domElement.getBoundingClientRect();v.current.x=(e.clientX-t.left)/t.width*2-1,v.current.y=-(2*((e.clientY-t.top)/t.height))+1};n.domElement.addEventListener("mousemove",a);let m=null,g=0,E=r=>{e=requestAnimationFrame(E),s.update();let a=performance.now();if(a-g>50){l.setFromCamera(v.current,o);let e=h.current.cubes.map(e=>e.mesh.children[0]),t=l.intersectObjects(e,!1);if(t.length>0){let e=t[0].object,n=h.current.cubes.find(t=>t.mesh.children[0]===e);n&&n.id!==m&&(f(n.id),m=n.id)}else null!==m&&(f(null),m=null);g=a}let d=y.current.getElapsedTime();if(h.current.drones.forEach(e=>{let{mesh:t,id:n,baseY:o}=e,i=p===n;t.position.y+=((i?o+3:o)-t.position.y)*.1,i?(t.rotation.y+=.01,t.userData.propellers.forEach(e=>{e.rotation.x+=.4})):(t.rotation.y+=(0-t.rotation.y)*.05,t.userData.propellers.forEach(e=>{e.rotation.x+=.05}))}),h.current.cubes.forEach(e=>{let{mesh:t,id:n}=e;if(p===n){let e=1+.1*Math.sin(3*d);t.scale.set(e,e,e)}else t.scale.set(1,1,1),t.rotation.y+=(0-t.rotation.y)*.1}),b.current++,b.current%10==0){let e=h.current.cubes.map(e=>{var n;let{mesh:i,id:r}=e,s=i.position.clone();return s.project(o),{id:r,x:(s.x+1)/2*window.innerWidth,y:-(s.y-1)/2*window.innerHeight,title:(null===(n=t.find(e=>e.id===r))||void 0===n?void 0:n.title)||""}});x(e)}n.render(i,o)};return e=requestAnimationFrame(E),()=>{cancelAnimationFrame(e),n.domElement.removeEventListener("mousemove",a)}},[p,t]);let g=()=>{let e=new r.ZAu,t=new r.Kj0(new r.BVQ(.5,1.2,4,8),new r.Wid({color:2904706,metalness:.9,roughness:.1}));t.rotation.z=Math.PI/2,e.add(t);let n=new r.Kj0(new r.xo$(.3,16,16),new r.Wid({color:1710618,metalness:.8}));n.position.set(.8,0,0),e.add(n);let o=new r.Kj0(new r.zf8(.15,16),new r.vBJ({color:43775}));o.position.set(.81,0,0),o.rotation.y=Math.PI/2,e.add(o);let i=[];return[[1.2,0,1.2],[-1.2,0,1.2],[1.2,0,-1.2],[-1.2,0,-1.2]].forEach(t=>{let n=new r.Kj0(new r.fHI(.05,.05,2.5,8),new r.Wid({color:4871528,metalness:.8}));n.position.set(...t),n.rotation.x=Math.PI/2,e.add(n);let o=new r.ZAu;o.position.set(...t);let s=new r.Kj0(new r.fHI(.15,.15,.1,16),new r.Wid({color:1712172,metalness:.9}));s.rotation.x=Math.PI/2,o.add(s);for(let e=0;e<4;e++){let t=new r.Kj0(new r._12(.8,.1),new r.Wid({color:14870768,side:r.ehD}));t.rotation.x=Math.PI/2,t.rotation.z=e*Math.PI/2,t.position.y=.06,o.add(t)}e.add(o),i.push(o)}),e.userData.propellers=i,e};return(0,o.jsxs)("div",{style:{position:"relative",width:"100%",height:"100vh",fontFamily:"Segoe UI, sans-serif"},children:[(0,o.jsx)("h1",{style:{position:"absolute",top:"20px",width:"100%",textAlign:"center",color:"#e2e8f0",fontSize:"2rem",zIndex:10},children:"Military Drone Assembly"}),(0,o.jsx)("canvas",{ref:a,style:{width:"100%",height:"100%",display:"block"}}),m.map(e=>(0,o.jsx)("div",{style:{position:"absolute",left:"".concat(e.x,"px"),top:"".concat(e.y+20,"px"),transform:"translateX(-50%)",color:"#edf2f7",fontSize:"0.85rem",backgroundColor:"rgba(0,0,0,0.6)",padding:"4px 8px",borderRadius:"4px",pointerEvents:"none",zIndex:5},children:e.title},e.id))]})};t.default=a}}]);